/*
 * jQuery FullScreenBG
 * http://grahamconzett.com
 *
 * Copyright (c) 2011 Graham Conzett

 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.

 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */

(function($){$.fn.fullScreenBG=function(options){var settings={'overflowHidden':true,'zindex':-10,'callback':function(){}};if(options){$.extend(settings,options);}return this.each(function(){function resizeWidthGreater(target,imageWidth,imageHeight,pageWidth,pageHeight){target.attr('width',pageWidth);var newWidth=pageWidth;var newHeight=target.height();if(pageHeight>newHeight){var newWidth=(pageWidth*(pageHeight/(newHeight-0.5)));target.attr('width',newWidth);}return newWidth;}function resizeHeightGreater(target,imageWidth,imageHeight,pageWidth,pageHeight){target.attr('height',pageHeight);var newWidth=target.width();var newHeight=target.height();if(pageWidth>newWidth){var newHeight=(pageHeight*(pageWidth/(newWidth-0.5)));target.attr('height',newHeight);}return newHeight;}function resizeSingleImage(image){var imageWidth=image.width();var imageHeight=image.height();var pageWidth=$('html').width();var pageHeight=$('html').height();if(imageWidth>=imageHeight){var newWidth=resizeWidthGreater(image,imageWidth,imageHeight,pageWidth,pageHeight);image.css({position:'absolute',top:'0',left:'50%',"margin-left":(newWidth/-2),"margin-top":'0',"z-index":settings.zindex});}else if(imageHeight>imageWidth){var newHeight=resizeHeightGreater(image,imageWidth,imageHeight,pageWidth,pageHeight);image.css({position:'absolute',left:'0',top:'50%',"margin-top":(newHeight/-2),"margin-left":'0',"margin-right":'0',"z-index":settings.zindex});}}function resizeContainerImage(image,pageWidth,pageHeight){var imageWidth=image.width();var imageHeight=image.height();if(imageWidth>=imageHeight){var newWidth=resizeWidthGreater(image,imageWidth,imageHeight,pageWidth,pageHeight);image.css({"margin-left":((pageWidth-newWidth)/2),"margin-top":((pageHeight-image.height())/2)});}else if(imageHeight>imageWidth){var newHeight=resizeHeightGreater(image,imageWidth,imageHeight,pageWidth,pageHeight);image.css({"margin-top":((pageHeight-newHeight)/2),"margin-left":((pageWidth-image.width())/2)});}}function loopThrough(container){var pageWidth=$('html').width();var pageHeight=$('html').height();$(container).find('img').each(function(){resizeContainerImage($(this),pageWidth,pageHeight);});$(container).css({position:'absolute',left:'0',top:'0',width:pageWidth,height:pageHeight,margin:'0',"z-index":settings.zindex});}function begin(target){if(target.is('img')){resizeSingleImage(target);}else{loopThrough(target);}}function init(target){if(target.is('img')){target.load(function(){resizeSingleImage(target);});}else{loopThrough(target);}}if(settings.overflowHidden==true){$('html').css({overflow:'hidden'});}init($(this));$(window).resize($.proxy(function(){begin($(this));},this));options.callback.call(this);});};})(jQuery);
