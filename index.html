<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Situation Room</title>
        <style>
body {
    background-color: black;
    margin: 0px;
    padding: 0px;
}

iframe {
    border: 0px solid black;
    margin: 0px; 
}

.mosaic {
    width: 49%;
    height: 49%;
    display: inline; 
}

.fullscreen {
    width: 99%;
    height: 99%;
    display: inline;
}

.hidden {
    display: none;
}
        </style>
<script src="/socket.io/socket.io.js""></script>
<script src="/config.js"></script>
<script src="/jquery-1.6.min.js"></script>
<script>
var socket = new io.Socket(SETTINGS.HOST, {port: SETTINGS.MONITOR_PORT}); 
socket.connect();
socket.on('message', function(event) {
    cmd = JSON.parse(event);
    switch (cmd['cmd']) {
        case 'full':
            full(cmd['window']);
        break;

        case 'mosaic':
            mosaic();
        break;

        case 'webpage':
            load(cmd['window'], cmd['url'], cmd['refresh']);
        break;

        case 'image':
            load(cmd['window'], '/image?u=' + cmd['url'], cmd['refresh']);
        break;
    }
});
var refreshIframe = new Array();

function load(window, src, refresh) {
    if (refreshIframe[window] != null) {
        clearInterval(refreshIframe[window] );
        refreshIframe[window] = null;
    }
    $('#window' + window).attr('src', src);
    if (refresh != 0 && refresh != null) {
        refreshIframe[window] = setInterval("refresh(" + window + ")", refresh * 1000);
    }
}

function mosaic() {
    var i = 1;
    while (i != 5) {
        $('#window' + i).attr('class', 'mosaic');
        i = i + 1;
    }
}

function full(window) {
    var i = 1;
    while (i != 5) {
        $('#window' + i).attr('class', 'hidden');
        i = i + 1;
    }
    $('#window' + window).attr('class', 'fullscreen');
}

function refresh(window) {
    var w = $('#window' + window);
    w.attr('src', w.attr('src'));
}
</script>
</head>
<body>
        <iframe id="window1" class="mosaic" scrolling="no" src="/black"></iframe>
        <iframe id="window2" class="mosaic" scrolling="no" src="/black"></iframe>
        <iframe id="window3" class="mosaic" scrolling="no" src="/black"></iframe>
        <iframe id="window4" class="mosaic" scrolling="no" src="/black"></iframe>
    </body>
</html>
